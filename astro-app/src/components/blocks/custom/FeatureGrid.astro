---
import type { FeatureGridBlock } from '@/lib/types';
import { Section, SectionContent, SectionGrid } from '@/components/ui/section';
import { Tile, TileContent, TileTitle, TileDescription } from '@/components/ui/tile';

interface Props extends FeatureGridBlock {
  class?: string;
  id?: string;
}

const { heading, columns, items } = Astro.props;
const cols = columns || 3;
const gridSize = cols === 2 ? 'lg' : cols === 4 ? 'sm' : 'default';
---

<Section data-animate>
  {heading && (
    <SectionContent class="max-w-3xl">
      <h2 class="text-4xl md:text-5xl font-bold tracking-[-0.03em] leading-[1.05]">{heading}</h2>
    </SectionContent>
  )}

  <SectionGrid size={gridSize}>
    {(items ?? []).map((feature, i) => (
      <Tile variant="floating">
        <TileContent>
          <div class="flex items-center gap-3">
            <div class="w-10 h-10 flex-shrink-0 flex items-center justify-center border-2 border-foreground group-hover/tile:bg-primary group-hover/tile:border-primary transition-colors duration-200">
              <span class="text-xs font-bold group-hover/tile:text-primary-foreground transition-colors duration-200">
                {String(i + 1).padStart(2, '0')}
              </span>
            </div>
            <TileTitle>{feature.title}</TileTitle>
          </div>
          <TileDescription class="whitespace-pre-line">{feature.description}</TileDescription>
        </TileContent>
      </Tile>
    ))}
  </SectionGrid>
</Section>
