---
import type { TextWithImageBlock } from '@/lib/types';
import { Section, SectionSplit, SectionContent, SectionMedia } from '@/components/ui/section';
import { PortableText } from 'astro-portabletext';

interface Props {
  block: TextWithImageBlock;
}

const { block } = Astro.props;
const isRight = block.imagePosition !== 'left';
const imgSrc = block.image?.asset?.url;
---

<Section data-animate>
  <SectionSplit class={!isRight ? '@lg:direction-rtl @lg:[&>*]:direction-ltr' : ''}>
    <SectionContent class="justify-center">
      {block.heading && (
        <h2 class="text-3xl md:text-4xl font-bold tracking-[-0.03em] leading-[1.1]">{block.heading}</h2>
      )}
      {block.content && (
        <div class="text-muted-foreground leading-relaxed prose">
          <PortableText value={block.content} />
        </div>
      )}
    </SectionContent>

    <SectionMedia class="aspect-[4/3]">
      {imgSrc && (
        <img
          src={imgSrc}
          alt={block.image?.alt || block.heading || ''}
          class="w-full h-full object-cover"
          loading="lazy"
        />
      )}
    </SectionMedia>
  </SectionSplit>
</Section>
