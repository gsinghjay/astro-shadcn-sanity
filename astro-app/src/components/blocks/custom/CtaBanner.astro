---
import type { CtaBannerBlock } from '@/lib/types';
import { Section, SectionContent, SectionActions } from '@/components/ui/section';
import { Button } from '@/components/ui/button';
import { stegaClean } from '@sanity/client/stega';

interface Props extends CtaBannerBlock {
  class?: string;
  id?: string;
}

const { heading, description, ctaButtons, backgroundVariant } = Astro.props;

const primaryBtnMap: Record<string, string> = {
  primary: 'bg-background text-primary hover:bg-background/90',
  dark: '',
  light: '',
  white: '',
};

const secondaryBtnMap: Record<string, string> = {
  primary: 'bg-transparent border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary',
  dark: 'bg-transparent border-background text-background hover:bg-background hover:text-foreground',
  light: '',
  white: '',
};

const variant = stegaClean(backgroundVariant) || 'dark';
---

<Section data-animate>
  <SectionContent class="items-center text-center max-w-3xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-bold tracking-[-0.03em] leading-[1.05]">
      {heading}
    </h2>

    {description && (
      <p class="text-lg leading-relaxed max-w-2xl opacity-80">{description}</p>
    )}

    {ctaButtons && ctaButtons.length > 0 && (
      <SectionActions class="justify-center">
        {ctaButtons.map((btn, i) => (
          <Button
            href={btn.url}
            variant={i === 0 ? 'default' : (btn.variant || 'outline')}
            class={i === 0 ? primaryBtnMap[variant] : secondaryBtnMap[variant]}
          >
            {btn.text}
          </Button>
        ))}
      </SectionActions>
    )}
  </SectionContent>
</Section>
