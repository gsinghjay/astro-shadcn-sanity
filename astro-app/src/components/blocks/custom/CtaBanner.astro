---
import type { CtaBannerBlock } from '@/lib/types';
import { Section, SectionContent, SectionActions } from '@/components/ui/section';
import { Button } from '@/components/ui/button';

interface Props {
  block: CtaBannerBlock;
}

const { block } = Astro.props;

const bgMap: Record<string, string> = {
  primary: 'bg-primary text-primary-foreground',
  dark: 'bg-foreground text-background',
  light: 'bg-muted',
  white: '',
};

const primaryBtnMap: Record<string, string> = {
  primary: 'bg-background text-primary hover:bg-background/90',
  dark: '',
  light: '',
  white: '',
};

const secondaryBtnMap: Record<string, string> = {
  primary: 'bg-transparent border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary',
  dark: 'bg-transparent border-background text-background hover:bg-background hover:text-foreground',
  light: '',
  white: '',
};

const variant = block.backgroundVariant || 'dark';
---

<Section class={bgMap[variant]} data-animate>
  <SectionContent class="items-center text-center max-w-3xl mx-auto">
    <h2 class="text-4xl md:text-5xl font-bold tracking-[-0.03em] leading-[1.05]">
      {block.heading}
    </h2>

    {block.description && (
      <p class="text-lg leading-relaxed max-w-2xl opacity-80">{block.description}</p>
    )}

    {block.ctaButtons && block.ctaButtons.length > 0 && (
      <SectionActions class="justify-center">
        {block.ctaButtons.map((btn, i) => (
          <Button
            href={btn.url}
            variant={i === 0 ? 'default' : (btn.variant || 'outline')}
            class={i === 0 ? primaryBtnMap[variant] : secondaryBtnMap[variant]}
          >
            {btn.text}
          </Button>
        ))}
      </SectionActions>
    )}
  </SectionContent>
</Section>
