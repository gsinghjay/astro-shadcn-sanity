---
import type { StatsRowBlock } from '@/lib/types';
import { Section } from '@/components/ui/section';
import { stegaClean } from '@sanity/client/stega';

interface Props extends StatsRowBlock {
  class?: string;
  id?: string;
}

const { heading, stats, backgroundVariant } = Astro.props;
const isDark = stegaClean(backgroundVariant) === 'dark';
---

<Section
  size="sm"
  class={`border-y-2 ${isDark ? 'bg-foreground text-background border-foreground' : 'bg-muted border-border'}`}
  data-animate
>
  {heading && (
    <h2 class="text-2xl md:text-3xl font-bold tracking-[-0.03em] text-center mb-8">{heading}</h2>
  )}
  <div class="grid grid-cols-2 md:grid-cols-4 gap-8 md:gap-12">
    {(stats ?? []).map((stat) => (
      <div class="text-center">
        <div class="text-4xl md:text-6xl font-bold tracking-[-0.04em] leading-none mb-3">
          {stat.value}
        </div>
        <div class={`label-caps ${isDark ? 'text-background/40' : 'text-muted-foreground'}`}>
          {stat.label}
        </div>
      </div>
    ))}
  </div>
</Section>
