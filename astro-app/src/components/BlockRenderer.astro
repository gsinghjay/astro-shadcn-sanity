---
import type { PageBlock } from '@/lib/types';
import { customBlocks, uiBlocks } from './block-registry';

interface Props {
  blocks: PageBlock[];
}

const { blocks } = Astro.props;
---

{blocks.map((block) => {
  const type = (block as any)._type;

  // Custom blocks (block prop pattern)
  const CustomComponent = customBlocks[type];
  if (CustomComponent) {
    return <CustomComponent block={block} />;
  }

  // fulldotdev/ui blocks (spread props pattern)
  const UiComponent = uiBlocks[type];
  if (UiComponent) {
    return <UiComponent {...(block as any)} />;
  }

  return null;
})}
