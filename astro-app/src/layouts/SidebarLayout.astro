---
/**
 * Sidebar layout â€” extends Layout with a two-column structure.
 * Slots: "header" (full-width above grid), default (left content), "sidebar" (right sticky).
 * On mobile, sidebar stacks above content for filter-first UX.
 */
import Layout from './Layout.astro';
import type { SeoProps } from "@/lib/types";

interface Props {
  title?: string;
  seo?: SeoProps | null;
  hideNav?: boolean;
  ogType?: string;
  sidebarWidth?: string;
}

const { title, seo, hideNav, ogType, sidebarWidth = '280px' } = Astro.props;
const hasSidebar = Astro.slots.has('sidebar');
---

<Layout title={title} seo={seo} hideNav={hideNav} ogType={ogType}>
  <slot name="header" />
  {hasSidebar ? (
    <div class="mx-auto w-full max-w-[var(--breakpoint-xl)] px-6 pb-12 flex flex-col lg:grid lg:gap-8 lg:pb-16" style={`--sidebar-width: ${sidebarWidth};`} data-sidebar-layout>
      <div>
        <slot />
      </div>
      <aside class="order-first lg:order-last mb-8 lg:mb-0">
        <div class="lg:sticky lg:top-24">
          <slot name="sidebar" />
        </div>
      </aside>
    </div>
  ) : (
    <slot />
  )}
</Layout>

<style is:global>
  [data-sidebar-layout] {
    grid-template-columns: 1fr var(--sidebar-width);
  }
</style>
